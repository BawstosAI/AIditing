(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{563:function(e,t,n){Promise.resolve().then(n.bind(n,6774))},6774:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var r=n(7437),o=n(2265);n(357);let i="https://aiditing-backend-hbjg.onrender.com";function a(){let[e,t]=(0,o.useState)(null),[n,a]=(0,o.useState)(null),[l,s]=(0,o.useState)(!1),[u,c]=(0,o.useState)(null),[d,f]=(0,o.useState)(0),[p,h]=(0,o.useState)("idle"),[v,m]=(0,o.useState)(""),[g,y]=(0,o.useState)(!1),b=(0,o.useCallback)(e=>{e.preventDefault(),s(!1);let n=Array.from(e.dataTransfer.files),r=n.find(e=>e.type.includes("video"))||null,o=n.find(e=>e.type.includes("audio"))||null;r&&t(r),o&&a(o)},[]),x=!!(e&&n&&!u),T=async()=>{if(!e||!n)return;let t=new FormData;t.append("video",e),t.append("audio",n);let r=await fetch("".concat(i,"/process"),{method:"POST",body:t});c((await r.json()).job_id),h("running"),f(1)};(0,o.useEffect)(()=>{if(!u)return;let e=setInterval(async()=>{var t,n,r;let o=await fetch("".concat(i,"/status/").concat(u));if(!o.ok)return;let a=await o.json();f(null!==(t=a.progress)&&void 0!==t?t:0),h(null!==(n=a.status)&&void 0!==n?n:""),m(null!==(r=a.message)&&void 0!==r?r:""),("completed"===a.status||"failed"===a.status)&&clearInterval(e)},1e3);return()=>clearInterval(e)},[u]);let j=async()=>{if(!u)return;y(!0);let e=await fetch("".concat(i,"/result/").concat(u));if(!e.ok){y(!1);return}let t=await e.blob(),n=URL.createObjectURL(t),r=document.createElement("a");r.href=n,r.download="out.mp4",document.body.appendChild(r),r.click(),r.remove(),URL.revokeObjectURL(n),y(!1)};return(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{style:{opacity:.85,marginBottom:16},children:"Glissez-d\xe9posez une vid\xe9o (.mp4) et une piste audio propre (.wav). Pas d'IA g\xe9n\xe9rative texte, on coupe seulement."}),(0,r.jsxs)("div",{onDrop:b,onDragOver:e=>{e.preventDefault(),s(!0)},onDragLeave:e=>{e.preventDefault(),s(!1)},style:{border:l?"2px dashed #58a6ff":"2px dashed #30363d",padding:24,borderRadius:12,background:l?"#161b22":"#0d1117",marginBottom:16},children:[(0,r.jsx)("div",{style:{marginBottom:8},children:"Drag & drop ici"}),(0,r.jsxs)("div",{style:{display:"flex",gap:8},children:[(0,r.jsx)("input",{type:"file",accept:"video/*",onChange:e=>{var n,r;return t(null!==(r=null===(n=e.target.files)||void 0===n?void 0:n[0])&&void 0!==r?r:null)}}),(0,r.jsx)("input",{type:"file",accept:"audio/*",onChange:e=>{var t,n;return a(null!==(n=null===(t=e.target.files)||void 0===t?void 0:t[0])&&void 0!==n?n:null)}})]}),(0,r.jsxs)("div",{style:{marginTop:8,fontSize:14,opacity:.8},children:[e?"Vid\xe9o: ".concat(e.name):"Vid\xe9o: (non s\xe9lectionn\xe9)"," \xb7 ",n?"Audio: ".concat(n.name):"Audio: (non s\xe9lectionn\xe9)"]})]}),(0,r.jsx)("button",{disabled:!x,onClick:T,style:{padding:"8px 14px",borderRadius:8,background:x?"#238636":"#30363d",color:"white",border:"none",cursor:x?"pointer":"not-allowed"},children:"Traiter"}),u&&(0,r.jsxs)("div",{style:{marginTop:24},children:[(0,r.jsxs)("div",{style:{marginBottom:8},children:["Statut: ",p," ",v?"â€” ".concat(v):""]}),(0,r.jsx)("div",{style:{height:12,background:"#30363d",borderRadius:6,overflow:"hidden",maxWidth:480},children:(0,r.jsx)("div",{style:{width:"".concat(d,"%"),height:"100%",background:"#58a6ff"}})}),"completed"===p&&(0,r.jsx)("div",{style:{marginTop:16},children:(0,r.jsx)("button",{onClick:j,disabled:g,style:{padding:"8px 14px",borderRadius:8,background:"#1f6feb",color:"white",border:"none"},children:g?"T\xe9l\xe9chargement...":"T\xe9l\xe9charger le r\xe9sultat"})}),"failed"===p&&(0,r.jsx)("div",{style:{marginTop:16,color:"#ffa198"},children:"Le traitement a \xe9chou\xe9."})]}),(0,r.jsxs)("div",{style:{marginTop:32,fontSize:13,opacity:.7},children:["Backend: ",i]})]})}},357:function(e,t,n){"use strict";var r,o;e.exports=(null==(r=n.g.process)?void 0:r.env)&&"object"==typeof(null==(o=n.g.process)?void 0:o.env)?n.g.process:n(8081)},8081:function(e){!function(){var t={229:function(e){var t,n,r,o=e.exports={};function i(){throw Error("setTimeout has not been defined")}function a(){throw Error("clearTimeout has not been defined")}function l(e){if(t===setTimeout)return setTimeout(e,0);if((t===i||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:i}catch(e){t=i}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(e){n=a}}();var s=[],u=!1,c=-1;function d(){u&&r&&(u=!1,r.length?s=r.concat(s):c=-1,s.length&&f())}function f(){if(!u){var e=l(d);u=!0;for(var t=s.length;t;){for(r=s,s=[];++c<t;)r&&r[c].run();c=-1,t=s.length}r=null,u=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function h(){}o.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];s.push(new p(e,t)),1!==s.length||u||l(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=h,o.addListener=h,o.once=h,o.off=h,o.removeListener=h,o.removeAllListeners=h,o.emit=h,o.prependListener=h,o.prependOnceListener=h,o.listeners=function(e){return[]},o.binding=function(e){throw Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw Error("process.chdir is not supported")},o.umask=function(){return 0}}},n={};function r(e){var o=n[e];if(void 0!==o)return o.exports;var i=n[e]={exports:{}},a=!0;try{t[e](i,i.exports,r),a=!1}finally{a&&delete n[e]}return i.exports}r.ab="//";var o=r(229);e.exports=o}()}},function(e){e.O(0,[971,23,744],function(){return e(e.s=563)}),_N_E=e.O()}]);